import{w as J}from"./with-props-DyG_vBPJ.js";import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{a as p,t as X,q as Y}from"./chunk-D4RADZKF-By21buN-.js";import{L as Z}from"./loader-B2rr_xqw.js";import{u as ee}from"./language-context-DQqIPPDP.js";import{B as f}from"./badge-BR4L36Rg.js";import{B as L}from"./button-CYnDp3Q-.js";import{C as v,a as y,b as T,c as se,d as D}from"./card-DunmZ-Mm.js";import{f as $,R as te,I as re,D as ae,a as ie,b as ne,d as oe,e as ce,g as de,c as b}from"./dropdown-menu-C2T7FvO_.js";import{I as le}from"./input-BPm_T_uW.js";import{c as me,a as M}from"./index-wu72o1Zw.js";import{P as ue}from"./index-Dspms17g.js";import{P as C}from"./index-DTIwNWd2.js";import{u as xe}from"./index-BhFca_hj.js";import{u as he,a as pe}from"./Combination-BUzufNIs.js";import{c as N}from"./utils-DIzSUSji.js";import{a as fe}from"./use-task-ClqRGOoq.js";import{g as ge}from"./index-DgMzxt3E.js";import{a as k,f as ve}from"./date-utils-BYRQ6yq9.js";import{g as je,a as A}from"./translations-D806p-9r.js";import{A as be,a as Ne}from"./arrow-up-narrow-wide-DEjoBurv.js";import{F as we}from"./funnel-7g3NhcIA.js";import{C as ye}from"./circle-check-c3MMHh6m.js";import{C as Te}from"./clock-DtXE6-Nx.js";import{c as De}from"./createLucideIcon-DYOGCEiU.js";import"./index-BIYj4ebj.js";import"./index-CnVBUu3y.js";import"./fetch-utils-CEdl9sdl.js";import"./useQuery-CkwzADaB.js";import"./differenceInCalendarDays-D7TXt3rl.js";import"./useMutation-CUJSGQ7R.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],_e=De("arrow-up-right",Ce);var _="Tabs",[Se,ps]=me(_,[$]),H=$(),[Ie,R]=Se(_),G=p.forwardRef((t,r)=>{const{__scopeTabs:m,value:n,onValueChange:d,defaultValue:u,orientation:a="horizontal",dir:o,activationMode:l="automatic",...g}=t,i=xe(o),[c,x]=he({prop:n,onChange:d,defaultProp:u??"",caller:_});return e.jsx(Ie,{scope:m,baseId:pe(),value:c,onValueChange:x,orientation:a,dir:i,activationMode:l,children:e.jsx(C.div,{dir:i,"data-orientation":a,...g,ref:r})})});G.displayName=_;var V="TabsList",z=p.forwardRef((t,r)=>{const{__scopeTabs:m,loop:n=!0,...d}=t,u=R(V,m),a=H(m);return e.jsx(te,{asChild:!0,...a,orientation:u.orientation,dir:u.dir,loop:n,children:e.jsx(C.div,{role:"tablist","aria-orientation":u.orientation,...d,ref:r})})});z.displayName=V;var B="TabsTrigger",K=p.forwardRef((t,r)=>{const{__scopeTabs:m,value:n,disabled:d=!1,...u}=t,a=R(B,m),o=H(m),l=U(a.baseId,n),g=W(a.baseId,n),i=n===a.value;return e.jsx(re,{asChild:!0,...o,focusable:!d,active:i,children:e.jsx(C.button,{type:"button",role:"tab","aria-selected":i,"aria-controls":g,"data-state":i?"active":"inactive","data-disabled":d?"":void 0,disabled:d,id:l,...u,ref:r,onMouseDown:M(t.onMouseDown,c=>{!d&&c.button===0&&c.ctrlKey===!1?a.onValueChange(n):c.preventDefault()}),onKeyDown:M(t.onKeyDown,c=>{[" ","Enter"].includes(c.key)&&a.onValueChange(n)}),onFocus:M(t.onFocus,()=>{const c=a.activationMode!=="manual";!i&&!d&&c&&a.onValueChange(n)})})})});K.displayName=B;var Q="TabsContent",q=p.forwardRef((t,r)=>{const{__scopeTabs:m,value:n,forceMount:d,children:u,...a}=t,o=R(Q,m),l=U(o.baseId,n),g=W(o.baseId,n),i=n===o.value,c=p.useRef(i);return p.useEffect(()=>{const x=requestAnimationFrame(()=>c.current=!1);return()=>cancelAnimationFrame(x)},[]),e.jsx(ue,{present:d||i,children:({present:x})=>e.jsx(C.div,{"data-state":i?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!x,id:g,tabIndex:0,...a,ref:r,style:{...t.style,animationDuration:c.current?"0s":void 0},children:x&&u})})});q.displayName=Q;function U(t,r){return`${t}-trigger-${r}`}function W(t,r){return`${t}-content-${r}`}var Pe=G,Me=z,ke=K,Ae=q;function Re({className:t,...r}){return e.jsx(Pe,{"data-slot":"tabs",className:N("flex flex-col gap-2",t),...r})}function Le({className:t,...r}){return e.jsx(Me,{"data-slot":"tabs-list",className:N("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...r})}function E({className:t,...r}){return e.jsx(ke,{"data-slot":"tabs-trigger",className:N("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}function F({className:t,...r}){return e.jsx(Ae,{"data-slot":"tabs-content",className:N("flex-1 outline-none",t),...r})}function fs({}){return[{title:"TaskHub | Мои задачи"},{name:"description",content:"Мои задачи в TaskHub!"}]}const Ee=()=>{const{t}=ee(),[r,m]=X(),n=r.get("filter")||"all",d=r.get("sort")||"desc",u=r.get("search")||"",[a,o]=p.useState(n),[l,g]=p.useState(d==="asc"?"asc":"desc"),[i,c]=p.useState(u);p.useEffect(()=>{const s={};r.forEach((h,w)=>{s[w]=h}),s.filter=a,s.sort=l,s.search=i,m(s,{replace:!0})},[a,l,i]),p.useEffect(()=>{const s=r.get("filter")||"all",h=r.get("sort")||"desc",w=r.get("search")||"";s!==a&&o(s),h!==l&&g(h==="asc"?"asc":"desc"),w!==i&&c(w)},[r]);const{data:x,isPending:O}=fe(),j=[...(x==null?void 0:x.length)>0?x.filter(s=>a==="all"?!0:a==="todo"?s.status==="To Do":a==="inprogress"?s.status==="In Progress":a==="done"?s.status==="Done":a==="achieved"?s.isArchived===!0:a==="high"?s.priority==="High":!0).filter(s=>{var h;return s.title.toLowerCase().includes(i.toLowerCase())||((h=s.description)==null?void 0:h.toLowerCase().includes(i.toLowerCase()))}):[]].sort((s,h)=>s.dueDate&&h.dueDate?l==="asc"?new Date(s.dueDate).getTime()-new Date(h.dueDate).getTime():new Date(h.dueDate).getTime()-new Date(s.dueDate).getTime():0),S=j.filter(s=>s.status==="To Do"),I=j.filter(s=>s.status==="In Progress"),P=j.filter(s=>s.status==="Done");return O?e.jsx(Z,{message:t("common.loading_data")}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start md:items-center justify-between",children:[e.jsx("h1",{className:"text-xl md:text-3xl font-bold",children:t("nav.my_tasks")}),e.jsxs("div",{className:"flex flex-col items-start md:items-center md:flex-row gap-2",children:[e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>g(l==="asc"?"desc":"asc"),children:[l==="asc"?e.jsx(be,{className:"h-4 w-4 mr-1"}):e.jsx(Ne,{className:"h-4 w-4 mr-1"}),t(l==="asc"?"sort.oldest_first":"sort.newest_first")]}),e.jsxs(ae,{children:[e.jsx(ie,{asChild:!0,children:e.jsxs(L,{size:"sm",variant:"outline",children:[e.jsx(we,{className:"h-4 w-4 mr-1"}),t("filter.filter")]})}),e.jsxs(ne,{className:"w-56",align:"end",children:[e.jsx(oe,{children:t("filter.filter_tasks")}),e.jsx(ce,{}),e.jsxs(de,{children:[e.jsx(b,{onClick:()=>o("all"),children:t("filter.all_tasks")}),e.jsx(b,{onClick:()=>o("todo"),children:t("status.todo")}),e.jsx(b,{onClick:()=>o("inprogress"),children:t("status.in_progress")}),e.jsx(b,{onClick:()=>o("done"),children:t("status.done")}),e.jsx(b,{onClick:()=>o("achieved"),children:t("filter.archived")}),e.jsx(b,{onClick:()=>o("high"),children:t("filter.high_priority")})]})]})]})]})]}),e.jsx(le,{placeholder:t("search.find_tasks"),value:i,onChange:s=>c(s.target.value),className:"max-w-md"}),e.jsxs(Re,{defaultValue:"list",children:[e.jsxs(Le,{children:[e.jsx(E,{value:"list",children:t("tabs.list")}),e.jsx(E,{value:"board",children:t("tabs.board")})]}),e.jsx(F,{value:"list",className:"space-y-4",children:e.jsxs(v,{children:[e.jsxs(y,{className:"pb-3",children:[e.jsx(T,{children:t("nav.my_tasks")}),e.jsxs(se,{children:[j.length," ",t("tasks.assigned_to_you")]})]}),e.jsx(D,{className:"p-0",children:e.jsxs("div",{className:"divide-y",children:[j.map(s=>e.jsx("div",{className:"p-4 hover:bg-muted/50",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-2 gap-3",children:[e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:`mr-3 rounded-full p-1 ${s.status==="Done"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":s.priority==="High"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:s.status==="Done"?e.jsx(ye,{className:"h-4 w-4"}):e.jsx(Te,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsxs(Y,{to:`/dashboard/task/${s._id}`,className:"font-medium hover:text-primary hover:underline transition-colors flex items-center",children:[s.title,e.jsx(_e,{className:"h-3 w-3 ml-1"})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(f,{variant:s.status.toLowerCase(),children:je(s.status)}),s.priority&&e.jsx(f,{variant:s.priority==="High"?"destructive":"secondary",children:A(s.priority)}),s.isArchived&&e.jsx(f,{variant:"outline",children:t("filter.archived")})]})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[s.dueDate&&e.jsxs("div",{className:N(ge(s.dueDate)),children:[t("tasks.due_date_short"),": ",k(s.dueDate)]}),e.jsxs("div",{children:[t("tasks.modified"),": ",ve(s.updatedAt)]})]})]})},s._id)),j.length===0&&e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:t("tasks.no_matching_tasks")})]})})]})}),e.jsx(F,{value:"board",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(v,{children:[e.jsx(y,{className:"bg-muted/50 pb-3",children:e.jsxs(T,{className:"text-lg flex items-center",children:[t("status.todo"),e.jsx(f,{variant:"outline",className:"ml-2",children:S.length})]})}),e.jsxs(D,{className:"p-3 space-y-3 max-h-[600px] overflow-y-auto",children:[S.map(s=>e.jsx(v,{className:"p-3 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"block",children:[e.jsx("h3",{className:"font-medium",children:s.title}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1 truncate",children:s.description}),e.jsxs("div",{className:"flex items-center mt-2",children:[s.priority&&e.jsx(f,{variant:s.priority==="High"?"destructive":"secondary",className:"mr-1",children:A(s.priority)}),s.dueDate&&e.jsx("span",{className:"text-xs text-muted-foreground",children:k(s.dueDate)})]})]})},s._id)),S.length===0&&e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:t("tasks.no_tasks")})]})]}),e.jsxs(v,{children:[e.jsx(y,{className:"bg-muted/50 pb-3",children:e.jsxs(T,{className:"text-lg flex items-center",children:[t("status.in_progress"),e.jsx(f,{variant:"outline",className:"ml-2",children:I.length})]})}),e.jsxs(D,{className:"p-3 space-y-3 max-h-[600px] overflow-y-auto",children:[I.map(s=>e.jsx(v,{className:"p-3 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"block",children:[e.jsx("h3",{className:"font-medium",children:s.title}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1 truncate",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("div",{children:s.priority&&e.jsx(f,{variant:s.priority==="High"?"destructive":"secondary",className:"mr-1",children:A(s.priority)})}),s.dueDate&&e.jsx("span",{className:"text-xs text-muted-foreground",children:k(s.dueDate)})]})]})},s._id)),I.length===0&&e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:t("tasks.no_tasks_in_progress")})]})]}),e.jsxs(v,{children:[e.jsx(y,{className:"bg-muted/50 pb-3",children:e.jsxs(T,{className:"text-lg flex items-center",children:[t("status.done"),e.jsx(f,{variant:"outline",className:"ml-2",children:P.length})]})}),e.jsxs(D,{className:"p-3 space-y-3 max-h-[600px] overflow-y-auto",children:[P.map(s=>e.jsx(v,{className:"p-3 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"block",children:[e.jsx("h3",{className:"font-medium",children:s.title}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1 truncate",children:s.description}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(f,{variant:"done",className:"mr-1",children:t("tasks.completed_badge")}),s.isArchived&&e.jsx(f,{variant:"outline",children:t("filter.archived")})]})]})},s._id)),P.length===0&&e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:t("tasks.no_completed_tasks")})]})]})]})})]})]})},gs=J(Ee);export{gs as default,fs as meta};
