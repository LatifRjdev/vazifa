import{w as Z}from"./with-props-DyG_vBPJ.js";import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{a,q as A}from"./chunk-D4RADZKF-By21buN-.js";import{B as g}from"./badge-BR4L36Rg.js";import{B as r}from"./button-CYnDp3Q-.js";import{C as H,a as I,b as V,d as E}from"./card-DunmZ-Mm.js";import{I as O}from"./input-BPm_T_uW.js";import{S as $,a as z,b as G,c as q,d as t}from"./select-CDLpyc4Q.js";import{S as ee,T as se,a as te,b as Q,c,d as ae,e as d}from"./table-DP2a9-SM.js";import{g as J,f as K,C as N,a as le}from"./date-filters-lJ-rVYS_.js";import{P as w,a as C,b,r as l}from"./popover-Ct-mlSgl.js";import{b as re}from"./use-task-ClqRGOoq.js";import{f as ie}from"./date-utils-BYRQ6yq9.js";import{a as ce}from"./translations-D806p-9r.js";import{L as de}from"./loader-B2rr_xqw.js";import{c as U}from"./createLucideIcon-DYOGCEiU.js";import{c as T}from"./utils-DIzSUSji.js";import{C as oe}from"./circle-check-big-CiMFBpoa.js";import{F as ne}from"./funnel-7g3NhcIA.js";import{C as S}from"./calendar-Dcbq6X4X.js";import{E as me}from"./eye-BcJvAFHL.js";import{f as h}from"./DayPicker-B79OQGaG.js";import"./index-CnVBUu3y.js";import"./index-BdQq_4o_.js";import"./index-wu72o1Zw.js";import"./index-BIYj4ebj.js";import"./index-DTIwNWd2.js";import"./index-BhFca_hj.js";import"./Combination-BUzufNIs.js";import"./endOfMonth-B9jd4p3w.js";import"./differenceInCalendarDays-D7TXt3rl.js";import"./fetch-utils-CEdl9sdl.js";import"./en-US-DuGUIuVI.js";import"./index-Dspms17g.js";import"./useQuery-CkwzADaB.js";import"./useMutation-CUJSGQ7R.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],he=U("circle-plus",xe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],je=U("layout-grid",ue),pe=({title:j,description:p,buttonText:f,buttonOnClick:y})=>e.jsxs("div",{className:"col-span-full text-center py-12 2xl:py-24 bg-muted/40 rounded-lg",children:[e.jsx(je,{className:"h-12 w-12 mx-auto text-muted-foreground"}),e.jsx("h3",{className:"mt-4 text-lg font-medium",children:j}),e.jsx("p",{className:"text-sm md:text-base text-muted-foreground mt-2 mb-4 max-w-sm mx-auto",children:p}),e.jsxs(r,{onClick:y,children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),f]})]});function es(){return[{title:"Vazifa | Выполненные задачи"},{name:"description",content:"Просмотр выполненных задач в Vazifa!"}]}const fe=()=>{const[j,p]=a.useState(""),[f,y]=a.useState(""),[v,k]=a.useState(""),[o,R]=a.useState(void 0),[n,_]=a.useState(void 0),[u,F]=a.useState("all"),[m,M]=a.useState(void 0),[x,D]=a.useState(void 0),{data:P,isLoading:W,error:X}=re({search:j||void 0,assignee:f||void 0,priority:v&&v!=="all"?v:void 0,dateFrom:o?h(o,"yyyy-MM-dd"):void 0,dateTo:n?h(n,"yyyy-MM-dd"):void 0});let i=(P==null?void 0:P.completedTasks)||[];if(u!=="all")if(u==="custom"){if(m||x){const s=J("custom",{from:m,to:x});i=K(i,s,"createdAt")}}else{const s=J(u);i=K(i,s,"createdAt")}return W?e.jsx(de,{message:"Загрузка выполненных задач..."}):X?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] space-y-4",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Ошибка загрузки"}),e.jsx("p",{className:"text-muted-foreground",children:"Не удалось загрузить выполненные задачи"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Выполненные задачи"}),e.jsx("p",{className:"text-muted-foreground",children:"Просмотр и управление выполненными задачами"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(g,{variant:"secondary",className:"text-sm",children:[e.jsx(oe,{className:"h-4 w-4 mr-1"}),i.length," выполнено"]})})]}),e.jsxs(H,{children:[e.jsx(I,{children:e.jsxs(V,{className:"flex items-center",children:[e.jsx(ne,{className:"h-5 w-5 mr-2"}),"Фильтры"]})}),e.jsxs(E,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Поиск"}),e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(O,{placeholder:"Поиск по названию или описанию...",value:j,onChange:s=>p(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Приоритет"}),e.jsxs($,{value:v,onValueChange:k,children:[e.jsx(z,{children:e.jsx(G,{placeholder:"Все приоритеты"})}),e.jsxs(q,{children:[e.jsx(t,{value:"all",children:"Все приоритеты"}),e.jsx(t,{value:"Low",children:"Низкий"}),e.jsx(t,{value:"Medium",children:"Средний"}),e.jsx(t,{value:"High",children:"Высокий"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Исполнитель"}),e.jsx(O,{placeholder:"ID исполнителя",value:f,onChange:s=>y(s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Дата выполнения (от)"}),e.jsxs(w,{children:[e.jsx(C,{asChild:!0,children:e.jsxs(r,{variant:"outline",className:T("w-full justify-start text-left font-normal",!o&&"text-muted-foreground"),children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),o?h(o,"dd.MM.yyyy",{locale:l}):"Выберите дату"]})}),e.jsx(b,{className:"w-auto p-0",align:"start",children:e.jsx(N,{mode:"single",selected:o,onSelect:R,initialFocus:!0,locale:l})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Дата выполнения (до)"}),e.jsxs(w,{children:[e.jsx(C,{asChild:!0,children:e.jsxs(r,{variant:"outline",className:T("w-full justify-start text-left font-normal",!n&&"text-muted-foreground"),children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),n?h(n,"dd.MM.yyyy",{locale:l}):"Выберите дату"]})}),e.jsx(b,{className:"w-auto p-0",align:"start",children:e.jsx(N,{mode:"single",selected:n,onSelect:_,initialFocus:!0,locale:l})})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(r,{variant:"outline",onClick:()=>{p(""),y(""),k(""),R(void 0),_(void 0),F("all"),M(void 0),D(void 0)},children:"Сбросить фильтры"})})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(le,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Фильтр по времени создания"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs($,{value:u,onValueChange:s=>F(s),children:[e.jsx(z,{className:"w-full md:w-48",children:e.jsx(G,{placeholder:"Период"})}),e.jsxs(q,{children:[e.jsx(t,{value:"all",children:"Все время"}),e.jsx(t,{value:"today",children:"За сегодня"}),e.jsx(t,{value:"week",children:"За неделю"}),e.jsx(t,{value:"month",children:"За месяц"}),e.jsx(t,{value:"6months",children:"За 6 месяцев"}),e.jsx(t,{value:"year",children:"За год"}),e.jsx(t,{value:"custom",children:"Произвольный период"})]})]}),u==="custom"&&e.jsxs(e.Fragment,{children:[e.jsxs(w,{children:[e.jsx(C,{asChild:!0,children:e.jsxs(r,{variant:"outline",className:T("w-full md:w-48 justify-start text-left font-normal",!m&&"text-muted-foreground"),children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),m?h(m,"dd.MM.yyyy",{locale:l}):"Дата от"]})}),e.jsx(b,{className:"w-auto p-0",align:"start",children:e.jsx(N,{mode:"single",selected:m,onSelect:M,initialFocus:!0,locale:l})})]}),e.jsxs(w,{children:[e.jsx(C,{asChild:!0,children:e.jsxs(r,{variant:"outline",className:T("w-full md:w-48 justify-start text-left font-normal",!x&&"text-muted-foreground"),children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),x?h(x,"dd.MM.yyyy",{locale:l}):"Дата до"]})}),e.jsx(b,{className:"w-auto p-0",align:"start",children:e.jsx(N,{mode:"single",selected:x,onSelect:D,initialFocus:!0,locale:l})})]})]}),e.jsx(r,{variant:"outline",onClick:()=>{F("all"),M(void 0),D(void 0)},className:"w-full md:w-auto",children:"Сбросить период"})]})]})]})]}),e.jsxs(H,{children:[e.jsx(I,{children:e.jsx(V,{children:"Список выполненных задач"})}),e.jsx(E,{children:i.length>0?e.jsxs(se,{children:[e.jsx(te,{children:e.jsxs(Q,{children:[e.jsx(c,{children:"№"}),e.jsx(c,{children:"Название задачи"}),e.jsx(c,{children:"Исполнители"}),e.jsx(c,{children:"Приоритет"}),e.jsx(c,{children:"Дата выполнения"}),e.jsx(c,{children:"В срок"}),e.jsx(c,{children:"Действия"})]})}),e.jsx(ae,{children:i.map((s,Y)=>{var B;return e.jsxs(Q,{children:[e.jsx(d,{className:"font-medium",children:Y+1}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsx(A,{to:`/dashboard/task/${s._id}`,className:"font-medium hover:underline",children:s.title}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description})]})}),e.jsx(d,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:(B=s.assignees)==null?void 0:B.map(L=>e.jsx(g,{variant:"secondary",className:"text-xs",children:L.name},L._id))})}),e.jsx(d,{children:e.jsx(g,{variant:s.priority==="High"?"destructive":s.priority==="Medium"?"default":"secondary",children:ce(s.priority)})}),e.jsx(d,{children:s.completedAt?ie(s.completedAt):"—"}),e.jsx(d,{children:s.completedOnTime!==null?e.jsx(g,{variant:s.completedOnTime?"default":"destructive",children:s.completedOnTime?"В срок":"Просрочено"}):e.jsx("span",{className:"text-muted-foreground",children:"—"})}),e.jsx(d,{children:e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(A,{to:`/dashboard/task/${s._id}`,children:e.jsx(r,{variant:"ghost",size:"sm",children:e.jsx(me,{className:"h-4 w-4"})})})})})]},s._id)})})]}):e.jsx(pe,{title:"Нет выполненных задач",description:"Выполненные задачи будут отображаться здесь",buttonText:"Назад",buttonOnClick:()=>window.history.back()})})]})]})},ss=Z(fe);export{ss as default,es as meta};
