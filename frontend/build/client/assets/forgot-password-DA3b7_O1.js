import{w as j}from"./with-props-DyG_vBPJ.js";import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{a as c,q as o}from"./chunk-D4RADZKF-By21buN-.js";import{B as d}from"./button-CYnDp3Q-.js";import{I as g}from"./input-BPm_T_uW.js";import{C as N,a as w,d as b,e as C}from"./card-DunmZ-Mm.js";import{z as x,u as F,F as v,a as y,b as P,c as S,d as A,e as k,s as L}from"./form-BmyV6FyK.js";import{A as E,a as I}from"./alert-DlLWaqXv.js";import{c as R}from"./use-auth-BFmN1zjT.js";import{A as H}from"./arrow-left-BZk8-X3l.js";import{C as q}from"./circle-check-c3MMHh6m.js";import{C as z}from"./circle-alert-CzTjZiAb.js";import{L as B}from"./loader-circle-DPdm6C66.js";import"./utils-DIzSUSji.js";import"./label-URIJR8-n.js";import"./index-DTIwNWd2.js";import"./index-CnVBUu3y.js";import"./useMutation-CUJSGQ7R.js";import"./fetch-utils-CEdl9sdl.js";import"./index-CNgNZYQm.js";import"./createLucideIcon-DYOGCEiU.js";function le({}){return[{title:"TaskHub | Forgot Password"},{name:"description",content:"Forgot Password to TaskHub!"}]}const M=x.object({email:x.string().email({message:"Please enter a valid email"})}),ne=j(function(){const[i,r]=c.useState(null),[u,p]=c.useState(!1),t=F({resolver:L(M),defaultValues:{email:""}}),{mutate:f,isPending:l}=R(),h=async a=>{r(null);try{f(a,{onSuccess:()=>{p(!0),t.reset()},onError:s=>{var n,m;r(((m=(n=s==null?void 0:s.response)==null?void 0:n.data)==null?void 0:m.message)||s.message||"Failed to send reset password email"),console.log(s)}})}catch(s){s instanceof Error?r(s.message):r("An unknown error occurred")}};return e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-muted/40 p-4",children:e.jsxs("div",{className:"w-full max-w-md space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-2 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Забыли Пароль"}),e.jsx("p",{className:"text-muted-foreground",children:"Введите свой адрес электронной почты, чтобы сбросить пароль"})]}),e.jsxs(N,{className:"border-border/50",children:[e.jsx(w,{children:e.jsxs(o,{to:"/sign-in",className:"flex items-center text-sm text-muted-foreground hover:text-foreground",children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Вернуться к входу"]})}),e.jsx(b,{children:u?e.jsxs("div",{className:"flex flex-col items-center space-y-4 py-6",children:[e.jsx("div",{className:"rounded-full bg-primary/10 p-3",children:e.jsx(q,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"text-xl font-semibold",children:"Проверьте почту"}),e.jsx("p",{className:"text-center text-muted-foreground",children:"Мы отправили ссылку для сброса пароля на ваш адрес электронной почты. Пожалуйста, проверьте ваш почтовый ящик."}),e.jsx(d,{variant:"outline",asChild:!0,className:"mt-4",children:e.jsx(o,{to:"/sign-in",children:"Вернуться к входу"})})]}):e.jsx(v,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(h),className:"space-y-4",children:[i&&e.jsxs(E,{variant:"destructive",children:[e.jsx(z,{className:"h-4 w-4"}),e.jsx(I,{children:i})]}),e.jsx(y,{control:t.control,name:"email",render:({field:a})=>e.jsxs(P,{children:[e.jsx(S,{children:"Почта"}),e.jsx(A,{children:e.jsx(g,{type:"email",placeholder:"email@example.com",...a})}),e.jsx(k,{})]})}),e.jsx(d,{type:"submit",size:"lg",className:"w-full",disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"mr-2 h-4 w-4 animate-spin"}),"Отправка ссылки..."]}):"Send Reset Link"})]})})}),e.jsx(C,{children:e.jsxs("div",{className:"text-center text-sm w-full",children:["Помните свой пароль?"," ",e.jsx(o,{to:"/sign-in",className:"text-blue-600 font-semibold hover:underline",children:"Войти"})]})})]})]})})});export{ne as default,le as meta};
